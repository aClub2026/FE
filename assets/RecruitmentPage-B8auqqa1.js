import{u as A,b as L,r as i,a as D,j as t}from"./index-rnGyL4Cb.js";import{H as b}from"./Header-C1GP_s1N.js";import{T as h,B,a as O}from"./BottomSheet-Cy5f03s2.js";import{u as M,R as P}from"./Card_recruitment-DPhzAYbH.js";import{u as R}from"./useMypageData-9Ax10JQW.js";import{S as k}from"./ic-arrow-down-gray-24-HmpxWKdv.js";import"./icn_search_24-2-D6vd6pKJ.js";import"./ic_arrow_left_24-BReOr3OU.js";import"./useQuery-C7X6Hprx.js";import"./Chip_period-B8lGs5IC.js";import"./recruitment-yAHXK7kU.js";import"./Default_images-DTygkBZ9.js";import"./user-BlfK6R9Z.js";const Y=()=>{const j=A(),S=L(),{posts:c,isLoading:v,error:x}=M("all"),[y,o]=i.useState(!1),[n,I]=i.useState("최근 게시순"),l=D(e=>e.isLoggedIn),{favorites:u,isLoading:N}=R(),[m]=i.useState(S.state?.filters||{categories:[],types:[],statuses:[],department:""}),w=["최근 게시순","저장순","마감 임박순"],C=e=>{I(e),o(!1)},f=i.useMemo(()=>{if(!l||!u)return c;const e=new Set(u.map(r=>r.recruitmentId));return c.map(r=>({...r,isScrapped:e.has(r.recruitmentId)}))},[c,u,l]),p=i.useMemo(()=>{const r=[...f.filter(s=>!(m.statuses.length>0&&!m.statuses.some(d=>d==="모집중"?s.status==="d-day":d==="모집 마감"?s.status==="end":d==="상시 모집"?s.status==="regular":!1)))],g=s=>s.status==="end"?1/0:s.status==="regular"?1e3:s.dDay;switch(n){case"최근 게시순":return r.sort((s,a)=>new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime());case"저장순":return r.sort((s,a)=>a.scrapCount-s.scrapCount);case"마감 임박순":return r.sort((s,a)=>g(s)-g(a));default:return r}},[f,n,m]);return v||l&&N?t.jsx("div",{className:"p-4 text-center",children:"로딩 중..."}):x?t.jsxs("div",{className:"p-4 text-center text-red-500",children:["오류 발생: ",x.message]}):t.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[t.jsx(b,{variant:"page"}),t.jsxs("nav",{className:"flex gap-3 px-4 pt-2",children:[t.jsx(h,{isActive:!0,children:"모집공고"}),t.jsx(h,{isActive:!1,onClick:()=>j("/clubs"),children:"동아리 둘러보기"})]}),t.jsx("div",{className:"flex justify-between items-center p-4",children:t.jsxs("button",{className:"flex items-center gap-1",onClick:()=>o(!0),children:[t.jsx("span",{className:"text-sm text-gray-700 font-medium",children:n}),t.jsx(k,{className:"w-4 h-4 -rotate-90 text-gray-700"})]})}),t.jsx("main",{className:"flex-grow px-4 pt-4",children:p.length>0?t.jsx("div",{className:"grid grid-cols-3 gap-3",children:p.map(e=>t.jsx(P,{recruitmentId:e.recruitmentId,clubId:e.clubId,images:e.images,title:e.title,status:e.status,dDay:e.dDay,viewCount:e.viewCount,scrapCount:e.scrapCount,isScrappedInitially:e.isScrapped},e.recruitmentId))}):t.jsx("div",{className:"flex flex-col items-center justify-center pt-20",children:t.jsx("p",{className:"text-[16px] font-semibold text-gray-500 leading-[1.35] tracking-[-0.03em] text-center",children:"해당하는 모집 공고가 없습니다."})})}),t.jsx(B,{isOpen:y,onClose:()=>o(!1),children:t.jsx("ul",{className:"space-y-2",children:w.map(e=>t.jsx("li",{children:t.jsx(O,{isActive:n===e,onClick:()=>C(e),children:e})},e))})})]})};export{Y as default};
