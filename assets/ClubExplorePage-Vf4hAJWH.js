import{r as s,j as e,u as k,b as N}from"./index-idLZ2ra4.js";import{H as b}from"./Header-DCXPCf8e.js";import{T as u,B as C,a as B}from"./BottomSheet-B2UFZ3J5.js";import{C as S}from"./Card_Club-_m7mplJN.js";import{u as E}from"./useClubs-DT_CaXaw.js";import{S as F}from"./ic-arrow-down-gray-24-CdlhW0Wa.js";import"./icn_search_24-2-D-2_nUOd.js";import"./ic_arrow_left_24-DEh5BAMN.js";import"./Chip_type-CDyWHx2q.js";import"./useQuery-BQXZuXjs.js";const I=i=>s.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},s.createElement("path",{d:"M2.01642 4.68994H13.9836",stroke:"#B7BFC8",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M2.01642 10.6685H13.9836",stroke:"#B7BFC8",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("circle",{cx:5.47443,cy:4.69,r:1.47135,fill:"white",stroke:"#B7BFC8",strokeWidth:1.2}),s.createElement("circle",{cx:10.717,cy:10.6685,r:1.47135,fill:"white",stroke:"#B7BFC8",strokeWidth:1.2})),L=i=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},s.createElement("path",{d:"M7.86365 7.86377L16.1362 16.1364",stroke:"#808A96",strokeWidth:1.4,strokeLinecap:"round"}),s.createElement("path",{d:"M16.1365 7.8634L7.86333 16.1366",stroke:"#808A96",strokeWidth:1.4,strokeLinecap:"round"})),A=({children:i,onDelete:c})=>e.jsxs("div",{className:"inline-flex items-center gap-x-1 bg-gray-50 rounded-[6px] pl-2.5 pr-1 py-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 leading-[1.4] tracking-[-0.03em]",children:i}),e.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 transition-colors","aria-label":"Remove filter",children:e.jsx(L,{className:"w-3.5 h-3.5 text-gray-500"})})]}),q=()=>{const i=k(),c=N(),[g,m]=s.useState(!1),[l,f]=s.useState("최근 등록순"),[r,j]=s.useState(c.state?.filters||{}),v=["최근 등록순","가나다 순"],{clubs:d,isLoading:y,error:x}=E({sort:l==="최근 등록순"?"recent":"alphabetical",...r}),p=s.useMemo(()=>{const t=[];return r.type&&t.push(r.type),r.category&&t.push(r.category),r.department&&t.push(r.department),r.isRecruiting&&t.push("모집중"),t},[r]),o=p.length,w=t=>{j(n=>{const a={...n};return n.type===t&&delete a.type,n.category===t&&delete a.category,n.department===t&&delete a.department,t==="모집중"&&delete a.isRecruiting,a})},h=s.useMemo(()=>{const t=[...d];switch(l){case"가나다 순":return t.sort((n,a)=>n.clubName.localeCompare(a.clubName));case"최근 등록순":return t.sort((n,a)=>a.clubId-n.clubId);default:return t}},[d,l]);return e.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[e.jsx(b,{variant:"page"}),e.jsxs("nav",{className:"flex gap-3 px-4 pt-2",children:[e.jsx(u,{isActive:!1,onClick:()=>i("/recruitment"),children:"모집공고"}),e.jsx(u,{isActive:!0,children:"동아리 둘러보기"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("button",{className:"flex items-center gap-1",onClick:()=>m(!0),children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:l}),e.jsx(F,{className:"w-4 h-4 -rotate-90 text-gray-700"})]}),e.jsxs("button",{className:"flex items-center gap-1",onClick:()=>i("/clubs/filter",{state:{filters:r}}),children:[e.jsx(I,{className:"w-4 h-4"}),e.jsxs("span",{className:`text-sm font-medium ${o>0?"text-gray-700":"text-gray-300"}`,children:["필터 ",o>0&&`(${o})`]})]})]}),o>0&&e.jsx("div",{className:"flex gap-2 px-4 pb-3 overflow-x-auto scrollbar-hide border-b border-gray-100",children:p.map(t=>e.jsx(A,{onDelete:()=>w(t),children:t},t))}),e.jsx("main",{className:"flex-grow px-4 pt-4",children:y?e.jsx("div",{className:"text-center pt-20",children:"로딩 중..."}):x?e.jsxs("div",{className:"text-center pt-20 text-red-500",children:["오류 발생: ",x.message]}):h.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-x-6 gap-y-5 w-fit mx-auto",children:h.map(t=>e.jsx(S,{club:t,variant:"explore"},t.clubId))}):e.jsx("div",{className:"flex flex-col items-center justify-center pt-20",children:e.jsx("p",{className:"text-[16px] font-semibold text-gray-500 leading-[1.35] tracking-[-0.03em] text-center",children:"해당하는 동아리가 없습니다."})})}),e.jsx(C,{isOpen:g,onClose:()=>m(!1),children:e.jsx("ul",{className:"space-y-2",children:v.map(t=>e.jsx("li",{children:e.jsx(B,{isActive:l===t,onClick:()=>{f(t),m(!1)},children:t})},t))})})]})};export{q as default};
